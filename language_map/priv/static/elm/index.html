<html>
  <head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
      integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
      crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
      integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
      crossorigin=""></script>
    <link rel="stylesheet" href="static/css/main.css" />
  </head>
  <body>
    <div id="map"></div>
    <!-- <div id="filters"> -->
    <!--   <div> -->
    <!--     <fieldset> -->
    <!--       <legend>Language Spoken at Home</legend> -->
    <!--       <select id="language"></select> -->
    <!--     </fieldset> -->
    <!--   </div> -->
    <!--   <div> -->
    <!--     <fieldset> -->
    <!--       <legend>Age</legend> -->
    <!--       <label for="age_from">From</label> -->
    <!--       <select id="age_from"></select> -->
    <!--       <label for="age_to">to</label> -->
    <!--       <select id="age_to"></select> -->
    <!--       years old -->
    <!--     </fieldset> -->
    <!--   </div> -->
    <!--   <div> -->
    <!--     <fieldset> -->
    <!--       <legend>English Speaking Ability</legend> -->
    <!--       <select id="english"></select> -->
    <!--     </fieldset> -->
    <!--   </div> -->
    <!--   <div> -->
    <!--     <fieldset> -->
    <!--       <legend>Citizenship Status</legend> -->
    <!--       <select id="citizenship"></select> -->
    <!--     </fieldset> -->
    <!--   </div> -->
    <!-- </div> -->
    <!-- <div id="legend"> -->
    <!--   <span>Percentage of speakers in area</span> -->
    <!--   <ul id="legend-items"> -->
    <!--   </ul> -->
    <!-- </div> -->
    <!-- Loading spinner -->
    <!-- <div class="loader"></div> -->

    <div id="elm"></div>

    <script type="text/javascript" src="static/elm/js/elm.js"></script>
    <script>
      var app = Elm.Main.embed(document.getElementById("elm"));
      var map;

      app.ports.initializeMap.subscribe(function(data) {
        map = L.map('map', {
          zoomControl: false,
          maxBounds: [
            [-90, -180],
            [90, 180]
          ],
          minZoom: 4
        }).fitBounds(
          [
            [data.boundingBox.southwestLat, data.boundingBox.southwestLng],
            [data.boundingBox.northeastLat, data.boundingBox.northeastLng],
          ]
        ).setZoom(data.zoomLevel);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      });
    </script>
  </body>
</html>
